import{s as ae,n as U,r as de}from"../chunks/scheduler.Cvp1HtTB.js";import{S as se,i as le,e as b,s as P,c as k,a as y,d as w,f as L,p as ie,k as v,y as R,g as H,h as f,z as Y,q as Z,A as ge,t as T,b as j,j as ve,C as ee,l as S,m as ce,n as z,o as ue,u as fe,v as he,w as pe,x as _e,r as we}from"../chunks/index.Cn1wqISX.js";import{e as te}from"../chunks/each.D6YF6ztN.js";import{P as be}from"../chunks/ProjectCard.BG4hCIi8.js";const M="http://localhost:8000/",ke=`${M}organizations/projects/`,ye=`${M}organizations/user/`,Ee=`${M}organizations/org/`;async function Te({fetch:o}){let e=await je(o),n=await Ce(o),t=await Oe(o);return{organization:n,user:e,projects:t}}async function je(o){try{const e=await o(ye,{method:"GET",credentials:"include"});if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return await e.json()}catch(e){console.error("There was a problem with the fetch operation:",e)}}async function Ce(o){try{const e=await o(Ee,{method:"GET",credentials:"include"});if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return await e.json()}catch(e){console.error("There was a problem with the fetch operation:",e)}}async function Oe(o){try{const e=await o(ke,{method:"GET",credentials:"include"});if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return await e.json()}catch(e){console.error("There was a problem with the fetch operation:",e)}}const He=Object.freeze(Object.defineProperty({__proto__:null,load:Te},Symbol.toStringTag,{value:"Module"}));function ne(o){let e,n;return{c(){e=b("p"),n=T(o[3])},l(t){e=k(t,"P",{});var a=y(e);n=j(a,o[3]),a.forEach(w)},m(t,a){H(t,e,a),f(e,n)},p(t,a){a&8&&ve(n,t[3])},d(t){t&&w(e)}}}function xe(o){let e,n,t,a,h,c="Invite",m,r,_,s=o[0]&&ne(o);return{c(){e=b("form"),n=b("div"),t=b("input"),a=P(),h=b("button"),h.textContent=c,m=P(),s&&s.c(),this.h()},l(d){e=k(d,"FORM",{class:!0});var g=y(e);n=k(g,"DIV",{class:!0});var I=y(n);t=k(I,"INPUT",{id:!0,name:!0,type:!0,placeholder:!0,class:!0}),I.forEach(w),a=L(g),h=k(g,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ie(h)!=="svelte-230ayk"&&(h.textContent=c),m=L(g),s&&s.l(g),g.forEach(w),this.h()},h(){v(t,"id","invitee_email"),v(t,"name","invitee_email"),v(t,"type","email"),v(t,"placeholder","Invitee's Email"),v(t,"class","shadow-md"),R(t,"invalid",o[2]),v(n,"class","input-container !w-min"),R(n,"invalid",o[1][1]==!1),v(h,"type","submit"),v(h,"class","btn !m-0 !w-max inline-block"),v(e,"class","flex flex-row items-center gap-2")},m(d,g){H(d,e,g),f(e,n),f(n,t),Y(t,o[1]),f(e,a),f(e,h),f(e,m),s&&s.m(e,null),r||(_=[Z(t,"input",o[5]),Z(e,"submit",ge(o[4]))],r=!0)},p(d,[g]){g&2&&t.value!==d[1]&&Y(t,d[1]),g&4&&R(t,"invalid",d[2]),g&2&&R(n,"invalid",d[1][1]==!1),d[0]?s?s.p(d,g):(s=ne(d),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:U,o:U,d(d){d&&w(e),s&&s.d(),r=!1,de(_)}}}function Ne(o,e,n){let t;const h="http://localhost:8000/organization/invite/";let c="",m=!1,r;async function _(){if(!c.trim()){n(2,m=!0),alert("Please enter a valid email.");return}try{(await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c}),credentials:"include"})).ok?n(0,r=!1):(n(0,r=!0),n(2,m=!1))}catch{n(0,r=!0)}}function s(){c=this.value,n(1,c)}return o.$$.update=()=>{o.$$.dirty&1&&n(3,t=r?"Failed to send invite.":"Invite sent!")},[r,c,m,t,_,s]}class $e extends se{constructor(e){super(),le(this,e,Ne,xe,ae,{})}}function oe(o,e,n){const t=o.slice();return t[5]=e[n],t}function ze(o){var W;let e,n,t,a=o[1].first_name+"",h,c,m,r,_,s,d=(((W=o[3])==null?void 0:W.name)??"Loading...")+"",g,I,C,D,E,O,A,Q=o[2].length+"",q,F,x,G;C=new $e({});let N=te(o[2]),u=[];for(let l=0;l<N.length;l+=1)u[l]=re(oe(o,N,l));const me=l=>S(u[l],1,1,()=>{u[l]=null});return{c(){e=b("div"),n=b("h1"),t=T("Hey, "),h=T(a),c=T("."),m=P(),r=b("section"),_=b("h2"),s=T("Organization • "),g=T(d),I=P(),fe(C.$$.fragment),D=P(),E=b("section"),O=b("h2"),A=T("Projects • "),q=T(Q),F=P(),x=b("ol");for(let l=0;l<u.length;l+=1)u[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var p=y(e);n=k(p,"H1",{class:!0});var i=y(n);t=j(i,"Hey, "),h=j(i,a),c=j(i,"."),i.forEach(w),m=L(p),r=k(p,"SECTION",{class:!0});var $=y(r);_=k($,"H2",{});var K=y(_);s=j(K,"Organization • "),g=j(K,d),K.forEach(w),I=L($),he(C.$$.fragment,$),$.forEach(w),D=L(p),E=k(p,"SECTION",{id:!0,class:!0});var B=y(E);O=k(B,"H2",{class:!0});var V=y(O);A=j(V,"Projects • "),q=j(V,Q),V.forEach(w),F=L(B),x=k(B,"OL",{class:!0});var X=y(x);for(let J=0;J<u.length;J+=1)u[J].l(X);X.forEach(w),B.forEach(w),p.forEach(w),this.h()},h(){v(n,"class","text-3xl"),v(r,"class","flex flex-col gap-4"),v(O,"class","m-0"),v(x,"class","flex flex-wrap items-center justify-center gap-4"),v(E,"id","projects"),v(E,"class","flex flex-col gap-5"),v(e,"class","flex flex-col justify-center items-center gap-4 w-full m-auto"),R(e,"visible",!o[0])},m(l,p){H(l,e,p),f(e,n),f(n,t),f(n,h),f(n,c),f(e,m),f(e,r),f(r,_),f(_,s),f(_,g),f(r,I),pe(C,r,null),f(e,D),f(e,E),f(E,O),f(O,A),f(O,q),f(E,F),f(E,x);for(let i=0;i<u.length;i+=1)u[i]&&u[i].m(x,null);G=!0},p(l,p){if(p&4){N=te(l[2]);let i;for(i=0;i<N.length;i+=1){const $=oe(l,N,i);u[i]?(u[i].p($,p),z(u[i],1)):(u[i]=re($),u[i].c(),z(u[i],1),u[i].m(x,null))}for(ue(),i=N.length;i<u.length;i+=1)me(i);ce()}(!G||p&1)&&R(e,"visible",!l[0])},i(l){if(!G){z(C.$$.fragment,l);for(let p=0;p<N.length;p+=1)z(u[p]);G=!0}},o(l){S(C.$$.fragment,l),u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)S(u[p]);G=!1},d(l){l&&w(e),_e(C),we(u,l)}}}function Ie(o){let e,n="Loading...";return{c(){e=b("h1"),e.textContent=n,this.h()},l(t){e=k(t,"H1",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-wq0b6b"&&(e.textContent=n),this.h()},h(){v(e,"class","text-2xl")},m(t,a){H(t,e,a)},p:U,i:U,o:U,d(t){t&&w(e)}}}function re(o){let e,n;return e=new be({props:{project:o[5]}}),{c(){fe(e.$$.fragment)},l(t){he(e.$$.fragment,t)},m(t,a){pe(e,t,a),n=!0},p:U,i(t){n||(z(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){_e(e,t)}}}function Pe(o){let e,n,t,a;const h=[Ie,ze],c=[];function m(r,_){return r[0]?0:1}return e=m(o),n=c[e]=h[e](o),{c(){n.c(),t=ee()},l(r){n.l(r),t=ee()},m(r,_){c[e].m(r,_),H(r,t,_),a=!0},p(r,[_]){let s=e;e=m(r),e===s?c[e].p(r,_):(ue(),S(c[s],1,1,()=>{c[s]=null}),ce(),n=c[e],n?n.p(r,_):(n=c[e]=h[e](r),n.c()),z(n,1),n.m(t.parentNode,t))},i(r){a||(z(n),a=!0)},o(r){S(n),a=!1},d(r){r&&w(t),c[e].d(r)}}}function Le(o,e,n){let t,{data:a}=e,h=a.user,c=a.projects,m=a.organization;return o.$$set=r=>{"data"in r&&n(4,a=r.data)},n(0,t=!h&&!c&&!m),[t,h,c,m,a]}class Be extends se{constructor(e){super(),le(this,e,Le,Pe,ae,{data:4})}}export{Be as component,He as universal};
